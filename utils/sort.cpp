#include <iostream>

// Функция сортировки методом сдвига (пункт 4)
void shiftSort(int A[], int N) {
    printf("=== НАЧАЛО СОРТИРОВКИ (Метод сдвига) ===\n");

    // Цикл начинается с 1-го элемента (A[0] считается уже отсортированной областью)
    for (int i = 1; i < N; i++) {
        int t = A[i];       // Запоминаем текущий элемент (L в методичке)
        int j = i - 1;      // Начинаем сравнение с элемента слева от i
        
        printf("ШАГ i=%d: Взяли элемент t = %d. Сравниваем с левой частью.\n", i, t);

        // Сдвиг элементов вправо, пока они больше t
        // Условие A[j] > t обеспечивает сортировку по возрастанию
        while (j >= 0 && A[j] > t) {
            printf("  -> Сравнение: A[%d](%d) > t(%d) -- ИСТИНА. Сдвигаем %d вправо на A[%d].\n", 
                   j, A[j], t, A[j], j + 1);
            
            A[j + 1] = A[j]; // Фактический сдвиг
            j = j - 1;       // Переход к следующему элементу левее
            
            // Визуализация промежуточного сдвига (опционально, можно убрать для компактности)
            printf("     [Массив внутри сдвига]: ");
            printArray(A, N); 
        }

        // Если цикл while завершился, значит найдено место для вставки или достигнуто начало
        if (j >= 0) {
             printf("  -> Сравнение: A[%d](%d) > t(%d) -- ЛОЖЬ. Место найдено.\n", j, A[j], t);
        } else {
             printf("  -> Достигнуто начало массива (j=-1).\n");
        }

        A[j + 1] = t;       // Вставка элемента t на освободившееся место
        printf("  => Вставка t(%d) в позицию A[%d].\n", t, j + 1);
        
        printf("Результат после шага i=%d: ", i);
        printArray(A, N);
        printf("--------------------------------------------------\n");
    }
    printf("=== СОРТИРОВКА ЗАВЕРШЕНА ===\n");
}